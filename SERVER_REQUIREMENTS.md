# üñ•Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–ª—è 200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (50-100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

**–î–∞—Ç–∞:** 2025-10-07  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ –≤–∏–¥–µ–æ

---

## üìä –ê–Ω–∞–ª–∏–∑ –Ω–∞–≥—Ä—É–∑–∫–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞:

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 200 —á–µ–ª–æ–≤–µ–∫
- **–ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** 50-100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–µ–º–∞—Ñ–æ—Ä –±–æ—Ç–∞:** 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `bot.py`)
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ –≤–∏–¥–µ–æ (—Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–ø–∏–π)

### –†–∞—Å—á–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤:

**–ù–∞ –æ–¥–Ω—É –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∏–¥–µ–æ:**

- CPU: ~2 —è–¥—Ä–∞ (–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ)
- RAM: ~1 –ì–ë
- Disk I/O: –∞–∫—Ç–∏–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å

**–î–ª—è 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫:**

- CPU: 20 √ó 2 = **40 vCPU**
- RAM: 20 √ó 1 –ì–ë = **20 –ì–ë** + 8 –ì–ë –¥–ª—è —Å–∏—Å—Ç–µ–º—ã = **28-32 –ì–ë**
- SSD: **200-300 –ì–ë** (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–µ—à)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

### ‚≠ê –í–∞—Ä–∏–∞–Ω—Ç 1: –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

```
CPU: 32 vCPU (AMD EPYC –∏–ª–∏ Intel Xeon)
RAM: 64 –ì–ë
SSD: 500 –ì–ë NVMe
–°–µ—Ç—å: 1 –ì–±–∏—Ç/—Å
–û–°: Ubuntu 22.04 LTS
```

**–ü–æ—á–µ–º—É —ç—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- 32 vCPU –ø–æ–∑–≤–æ–ª—è—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 15-20 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ
- 64 –ì–ë RAM –¥–∞–µ—Ç –∑–∞–ø–∞—Å –Ω–∞ –ø–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
- 500 –ì–ë SSD —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ —Ü–µ–Ω—ã:**

#### Hetzner (–ì–µ—Ä–º–∞–Ω–∏—è) - –í—ã–≥–æ–¥–Ω–µ–µ –≤—Å–µ–≥–æ

```
Dedicated Server AX102
- AMD Ryzen 9 7950X (16 cores / 32 threads)
- 128 GB DDR5 RAM
- 2√ó 1.92 TB NVMe SSD
- 1 –ì–±–∏—Ç/—Å
–¶–µ–Ω–∞: ‚Ç¨119/–º–µ—Å (~‚ÇΩ13,000/–º–µ—Å)
```

#### Selectel (–†–æ—Å—Å–∏—è)

```
–í—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- 32 vCPU
- 64 GB RAM
- 500 GB SSD
–¶–µ–Ω–∞: ~‚ÇΩ18,000-22,000/–º–µ—Å
```

#### Hetzner Cloud (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω dedicated)

```
CCX53
- 32 vCPU
- 64 GB RAM
- 360 GB NVMe
–¶–µ–Ω–∞: ‚Ç¨169/–º–µ—Å (~‚ÇΩ19,000/–º–µ—Å)
```

---

### üíé –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–µ–º–∏—É–º (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

```
CPU: 48-64 vCPU
RAM: 128 –ì–ë
SSD: 1 –¢–ë NVMe
–°–µ—Ç—å: 1-10 –ì–±–∏—Ç/—Å
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–æ—Å—Ç –¥–æ 500+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –•–æ—Ç–∏—Ç–µ –∑–∞–ø–∞—Å –¥–ª—è –∞–ø–≥—Ä–µ–π–¥–æ–≤

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**

#### Hetzner Dedicated

```
AX162-R
- AMD Ryzen 9 7950X3D (16 cores / 32 threads)
- 128 GB DDR5 RAM
- 2√ó 3.84 TB NVMe SSD
–¶–µ–Ω–∞: ‚Ç¨149/–º–µ—Å (~‚ÇΩ16,500/–º–µ—Å)
```

#### AWS EC2 (–ì–∏–±–∫–∏–π, –Ω–æ –¥–æ—Ä–æ–∂–µ)

```
c6i.8xlarge
- 32 vCPU
- 64 GB RAM
- –î–æ 10 –ì–±–∏—Ç/—Å
–¶–µ–Ω–∞: ~$1,200/–º–µ—Å (~‚ÇΩ110,000/–º–µ—Å)
```

---

### üí∞ –í–∞—Ä–∏–∞–Ω—Ç 3: –ë—é–¥–∂–µ—Ç–Ω—ã–π (–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

```
CPU: 16 vCPU
RAM: 32 –ì–ë
SSD: 200 –ì–ë
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

- –°–µ–º–∞—Ñ–æ—Ä –Ω—É–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ 10 (`asyncio.Semaphore(10)`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ 10 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –ø–∏–∫–∞—Ö –Ω–∞–≥—Ä—É–∑–∫–∏

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**

#### Hetzner Cloud

```
CCX33
- 16 vCPU
- 32 GB RAM
- 240 GB NVMe
–¶–µ–Ω–∞: ‚Ç¨91/–º–µ—Å (~‚ÇΩ10,000/–º–µ—Å)
```

#### Selectel

```
–û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- 16 vCPU
- 32 GB RAM
- 200 GB SSD
–¶–µ–Ω–∞: ~‚ÇΩ9,000-12,000/–º–µ—Å
```

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä                | –ë—é–¥–∂–µ—Ç–Ω—ã–π      | –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π ‚≠ê  | –ü—Ä–µ–º–∏—É–º       |
| ----------------------- | -------------- | --------------- | ------------- |
| vCPU                    | 16             | 32              | 48-64         |
| RAM                     | 32 –ì–ë          | 64 –ì–ë           | 128 –ì–ë        |
| SSD                     | 200 –ì–ë         | 500 –ì–ë          | 1 –¢–ë          |
| –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ | 10             | 20              | 30+           |
| –¶–µ–Ω–∞/–º–µ—Å (Hetzner)      | ‚Ç¨91 (~‚ÇΩ10k)    | ‚Ç¨119 (~‚ÇΩ13k)    | ‚Ç¨149 (~‚ÇΩ16k)  |
| –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è            | –î–æ 30 –∞–∫—Ç–∏–≤–Ω—ã—Ö | 50-100 –∞–∫—Ç–∏–≤–Ω—ã—Ö | 100+ –∞–∫—Ç–∏–≤–Ω—ã—Ö |

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è –≤–∞—à–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 50-100 –∞–∫—Ç–∏–≤–Ω—ã—Ö):

**üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º: Hetzner AX102**

```
–°–µ—Ä–≤–µ—Ä: Hetzner Dedicated AX102
CPU: AMD Ryzen 9 7950X (16 cores / 32 threads = 32 vCPU)
RAM: 128 GB DDR5
SSD: 2√ó 1.92 TB NVMe
–¶–µ–Ω–∞: ‚Ç¨119/–º–µ—Å (~‚ÇΩ13,000/–º–µ—Å)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ü–µ–Ω–∞/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–æ—â–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ
- ‚úÖ –û–≥—Ä–æ–º–Ω—ã–π –∑–∞–ø–∞—Å RAM (128 –ì–ë –≤–º–µ—Å—Ç–æ 64 –ì–ë)
- ‚úÖ –ú–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ Dedicated —Å–µ—Ä–≤–µ—Ä = —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ NVMe —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å):**

- Hetzner CCX53 (–æ–±–ª–∞–∫–æ) - ‚Ç¨169/–º–µ—Å
- –ú–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à—É –Ω–∞–≥—Ä—É–∑–∫—É

### 1. –í bot.py —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

```python
# bot.py, —Å—Ç—Ä–æ–∫–∞ 31
self.processing_semaphore = asyncio.Semaphore(20)
```

‚úÖ –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 20 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ CPU
htop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
free -h

# –ê–∫—Ç–∏–≤–Ω—ã–µ Python –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep python | wc -l

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ: –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å + (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ √ó 1-2)
```

### 3. –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Å–µ–º–∞—Ñ–æ—Ä–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º

**–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏ CPU < 70%:**

```python
self.processing_semaphore = asyncio.Semaphore(25)  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º
```

**–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω (CPU > 90%):**

```python
self.processing_semaphore = asyncio.Semaphore(15)  # –£–º–µ–Ω—å—à–∞–µ–º
```

---

## üìä –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫:

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ:**

- 1 –≤–∏–¥–µ–æ: 2-3 –º–∏–Ω—É—Ç—ã
- 20 –≤–∏–¥–µ–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: 2-3 –º–∏–Ω—É—Ç—ã
- –ó–∞ —á–∞—Å: **20 √ó 20 = 400-600 –≤–∏–¥–µ–æ**

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**

- –ó–∞ –¥–µ–Ω—å (12 –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Å–æ–≤): **4,800-7,200 –≤–∏–¥–µ–æ**
- –ü—Ä–∏ 3 –≤–∏–¥–µ–æ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **1,600-2,400 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å**

‚úÖ **–í—ã–≤–æ–¥:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∑–∞–ø–∞—Å–æ–º –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–∞—à–∏ 200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## ‚ö° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSD –∫–µ—à–∞

```bash
# –ú–æ–Ω—Ç–∏—Ä—É–µ–º tmpfs –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAM)
sudo mkdir /mnt/ramdisk
sudo mount -t tmpfs -o size=20G tmpfs /mnt/ramdisk

# –í config.py –∏–∑–º–µ–Ω–∏—Ç—å:
TEMP_DIR = '/mnt/ramdisk/temp'
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –≤ 10-50 —Ä–∞–∑

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ffmpeg –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

–í `video_processor.py` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```python
# –ü—Ä–∏ –≤—ã–∑–æ–≤–µ write_videofile –¥–æ–±–∞–≤–∏—Ç—å:
threads=4  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è ffmpeg
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Grafana + Prometheus –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫:

- CPU/RAM usage
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
- –î–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏

---

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –ê—Ä–µ–Ω–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞

- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ Hetzner.com
- [ ] –ó–∞–∫–∞–∑–∞—Ç—å Dedicated Server AX102
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (1-24 —á–∞—Å–∞)

### 2. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
ssh root@YOUR_SERVER_IP

# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã
apt install -y htop vim git curl wget
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Python 3.11
add-apt-repository -y ppa:deadsnakes/ppa
apt update
apt install -y python3.11 python3.11-venv python3.11-dev python3-pip

# FFmpeg (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
apt install -y ffmpeg

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
apt install -y libsm6 libxext6 libxrender-dev libgomp1 libglib2.0-0 libgl1-mesa-glx
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
cd /opt
git clone YOUR_REPOSITORY_URL videobot
cd videobot

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade pip
pip install -r requirements.txt

# –°–æ–∑–¥–∞–µ–º .env —Ñ–∞–π–ª
nano .env
# –í—Å—Ç–∞–≤–ª—è–µ–º: BOT_TOKEN=your_token_here
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd service

```bash
# –°–æ–∑–¥–∞–µ–º service —Ñ–∞–π–ª
nano /etc/systemd/system/videobot.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä):

```ini
[Unit]
Description=Telegram Video Bot (200 users, 50-100 concurrent)
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/videobot
Environment="PATH=/opt/videobot/venv/bin"
ExecStart=/opt/videobot/venv/bin/python bot.py
Restart=always
RestartSec=10

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
StandardOutput=append:/opt/videobot/bot.log
StandardError=append:/opt/videobot/bot_error.log

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫
MemoryMax=56G
CPUQuota=3000%

[Install]
WantedBy=multi-user.target
```

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º
systemctl daemon-reload
systemctl enable videobot
systemctl start videobot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
systemctl status videobot
```

### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /opt/videobot/bot.log

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–≥—Ä—É–∑–∫—É
htop

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
journalctl -u videobot --since "1 hour ago"
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall

```bash
# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
ufw allow OpenSSH
ufw enable

# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
ufw allow 3000  # Grafana
ufw allow 9090  # Prometheus
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
apt install -y unattended-upgrades
dpkg-reconfigure -plow unattended-upgrades
```

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç
nano /opt/backup.sh
```

```bash
#!/bin/bash
BACKUP_DIR="/opt/backups"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø —Ç–æ–ª—å–∫–æ –∫–æ–¥–∞ (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤)
tar -czf $BACKUP_DIR/videobot_$DATE.tar.gz \
    --exclude='temp/*' \
    --exclude='output/*' \
    --exclude='venv/*' \
    --exclude='__pycache__' \
    /opt/videobot

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (>14 –¥–Ω–µ–π)
find $BACKUP_DIR -type f -mtime +14 -delete

echo "Backup completed: videobot_$DATE.tar.gz"
```

```bash
# –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x /opt/backup.sh

# –î–æ–±–∞–≤–ª—è–µ–º –≤ cron (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4:00)
crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: 0 4 * * * /opt/backup.sh
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### Hetzner Support

- Email: support@hetzner.com
- Telefon: +49 (0) 9831 505-0
- Docs: https://docs.hetzner.com/

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π status endpoint:

```python
# –í bot.py –¥–æ–±–∞–≤—å—Ç–µ
import psutil

async def status_command(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞"""
    cpu_percent = psutil.cpu_percent(interval=1)
    ram = psutil.virtual_memory()
    disk = psutil.disk_usage('/')

    status_msg = (
        f"üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:\n\n"
        f"CPU: {cpu_percent}%\n"
        f"RAM: {ram.percent}% ({ram.used / 1024**3:.1f}/{ram.total / 1024**3:.1f} –ì–ë)\n"
        f"Disk: {disk.percent}% ({disk.used / 1024**3:.1f}/{disk.total / 1024**3:.1f} –ì–ë)\n"
        f"–ê–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫: {5 - self.processing_semaphore._value}/20"
    )

    await update.message.reply_text(status_msg)
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –°–µ—Ä–≤–µ—Ä –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω (Hetzner AX102 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- [ ] Ubuntu 22.04 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Python 3.11 –∏ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –°–µ–º–∞—Ñ–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 20 (`bot.py` —Å—Ç—Ä–æ–∫–∞ 31)
- [ ] Systemd service –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (htop, –ª–æ–≥–∏)
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 5-10 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –ë–æ—Ç –≥–æ—Ç–æ–≤ –¥–ª—è 200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π! üöÄ

---

**–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** ‚Ç¨119/–º–µ—Å (~‚ÇΩ13,000/–º–µ—Å)  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –î–æ 600 –≤–∏–¥–µ–æ –≤ —á–∞—Å  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
